第3章 HTTP报文

本章内容
・报文是如何流动的
・HTTP报文的三个组成部分(起始行、首部和实体的主题部分)
・请求和响应报文之间的区别
・请求报文支持的各种功能(方法)
・和响应报文一起返回的各种状态码
・各种各样的HTTP首部都是用来做什么的

3.1 报文流
HTTP报文时在HTTP应用程序之间发送的数据块。这些数据块以一些文本形式的元信息开头，这
些信息描述了报文的内容及含义，后面跟着可选的数据部分。这些报文在客户端、服务器和
代理之间流动。术语“流入”、“流出”、“上游”、“下游”都是用来描述报文方向的

3.1.1 报文流入源端服务器
HTTP使用属于流入和流出来描述事务处理的方向。报文流入源端服务器，工作完成之后，会流
回用户的Agent代理中。

3.1.2 报文向下游流动
不管是请求报文还是响应报文，所有报文都会向下游流动。所有报文的发送者都在接收者的上
游。

3.2 报文的组成部分
HTTP报文是简单的格式化数据块。每条报文都包含一条来自客户端的请求，或者一条来自服务
器的响应。它们由三个部分组成：对报文进行描述的起始行、包含属性的首部块、以及可选的
、包含数据的主体部分。

3.2.1 报文的语法
所有的HTTP报文都可以分为两类：请求报文和响应报文。请求报文会向Web服务器请求一个动
作。响应报文会将请求的结果返回给客户端。请求和响应报文的基本报文结构相同。
请求报文格式:
<method><request-URL><version>
<headers>

<entity-body>
响应报文格式：
<version><status><reason-phrase>
<headers>

<entity-body>
下面是对各部分的简单描述：
・方法(method)：客户端希望服务器对资源执行的动作。是一个单独的词，比如GET、HEAD或
POST。
・请求URL(request-URL)：命名了所请求资源，或者URL路径组件的完整URL。如果直接与服
务器进行对话，只要URL的路径组件是资源的绝对路径，通常就不会有什么问题--服务器可以
假定自己是URL的主机/端口。
・版本(version)：报文所使用的HTTP版本，分为主要版本号(major)和次要版本号(minor)
・状态码(status-code)：这三位数字描述了请求过程中所发生的情况。每个状态码的第一位
数字都用于描述状态的一般类别(“成功”、“出错”等)。
・原因短句(reason-phrase)：数字状态码的可读版本，包含行终止序列之前的所有文本。
・首部(header)：可以有零个或多个首部，每个首部都包含一个名字，后面跟着一个冒号，
然后是一个可选的控股，接着是一个值，最后是一个CRLF。首部是由一个空行(CRLF)结束
的，表示了首部列表的结束和实体主体部分的开始。
・实体的主体部分(entity-body)
实体的主体部分包含一个由任意数据组成的数据块。并不是所有的报文都包含实体的主体
部分，有时，报文只是以一个CRLF结束。

3.2.2 起始行
